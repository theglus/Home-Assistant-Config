  hold_action:
    action: failure
  double_tap_action:
    action: fire-dom-event
    browser_mod:
      command: popup
      title: Vacuum
      style:
        .: |
          :host .content {
            width: auto;
          }
        $: |
          .mdc-dialog .mdc-dialog__container .mdc-dialog__surface {
            background: none;
          }
      card:
        type: custom:mod-card
        card_mod:
          style:
            ha-card>hui-grid-card$: |
              #root {
                grid-template-columns: 400px 555px !important;
              }
        card:
          type: grid
          columns: 2
          square: false
          cards:
            - type: entities
              title: Dammsugare
              card_mod:
                class: add-header
                style: |
                  ha-card {
                    height: 596px !important;
                  }
            #################################################################
            ## Settings
            #################################################################
              entities:

              - entity: vacuum.winston

              # - entity: vacuum.winston.attributes.total_cleaning_time

              - type: custom:bar-card
                width: 55%
                height: 2em
                decimal: 0
                unit_of_measurement: '%'
                positions:
                  icon: outside
                  indicator: 'off'
                  name: outside
                severity:
                  - color: '#303435'
                    from: 11
                    to: 100
                  - color: '#6d2525'
                    from: 0
                    to: 10
                entity_row: true
                entities:

                  - entity: vacuum.winston
                    attribute: battery_level
                    name: Battery
                    icon: mdi:battery

                  - entity: vacuum.winston
                    attribute: filter_left
                    name: Filter
                    icon: custom:vacuum-filter

                  - entity: vacuum.winston
                    attribute: main_brush_left
                    name: Main Brush
                    icon: custom:vacuum-mainbrush

                  - entity: vacuum.winston
                    attribute: side_brush_left
                    name: Side Brush
                    icon: custom:vacuum-sidebrush

                  - entity: vacuum.winston
                    attribute: sensor_dirty_left
                    icon: custom:vacuum-sensor

              - entity: input_select.vacuum_speed

            - type: horizontal-stack
              cards:

                - type: custom:button-card
                  entity: vacuum.winston
                  icon: mdi:play-pause
                  tap_action:
                    action: call-service
                    service: >
                      [[[
                        return entity.state === 'docked' || entity.state === 'paused'
                          ? 'vacuum.start'
                          : 'vacuum.pause';
                      ]]]
                    service_data:
                      entity_id: >
                        [[[ return entity.entity_id; ]]]
                  template: icon_only

                - type: custom:button-card
                  entity: vacuum.winston
                  icon: mdi:battery-charging
                  tap_action:
                    action: call-service
                    service: vacuum.return_to_base
                    service_data:
                      entity_id: >
                        [[[ return entity.entity_id; ]]]
                  template: icon_only

                - type: custom:button-card
                  icon: mdi:delete-empty
                  tap_action:
                    action: call-service
                    service: vacuum.send_command
                    service_data:
                      entity_id: vacuum.winston
                      command: app_goto_target
                      params: [30750,22150]
                  template: icon_only

            #################################################################
            ## Vacuum Map
            #################################################################

            - type: vertical-stack
              view_layout:
                grid-area: map
              cards:
              - type: entities
                title: Map
                card_mod:
                  font-family: SF Text;
                  letter-spacing: 0.005em;
                  font-size: 1.6em;
                  font-weight: 500;
                  padding: 1em 0 0 1.68em;
                  line-height: initial;
                  cursor: default;
                  style: |
                    #states {
                      padding-bottom: 0;
                    }
                entities:
                  - type: custom:xiaomi-vacuum-map-card
                    title: Map
                    entity: vacuum.winston
                    map_camera: camera.xiaomi_cloud_map_extractor
                    camera_calibration: true
                    zones:
                      - - - 26710
                          - 22064
                          - 32110
                          - 23314
                          - 1
                        - - 27265
                          - 20396
                          - 32115
                          - 22096
                          - 1
                      - - - 26644
                          - 23295
                          - 32094
                          - 26045
                          - 1
                      - - - 23464
                          - 20509
                          - 26664
                          - 24009
                          - 1
                        - - 26606
                          - 20742
                          - 27206
                          - 21942
                          - 1
                      - - - 20984
                          - 23974
                          - 26934
                          - 26024
                          - 1
                      - - - 21143
                          - 21284
                          - 23293
                          - 23984
                          - 1